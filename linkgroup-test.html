<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Group Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a1a; 
            color: #fff; 
            margin: 20px;
        }
        .test-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        #test-area {
            position: relative;
            width: 100%;
            height: 500px;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>ðŸ”— Link Group Test</h1>
    
    <div>
        <button class="test-btn" onclick="testCreate()">Create Link Group</button>
        <button class="test-btn" onclick="testAddLink()">Add Link</button>
        <button class="test-btn" onclick="testClear()">Clear</button>
    </div>
    
    <div id="test-area"></div>

    <script>
        // Mock core module
        window.SidekickModules = {
            Core: {
                ChromeStorage: {
                    get: async (key) => JSON.parse(localStorage.getItem(key) || 'null'),
                    set: async (key, value) => localStorage.setItem(key, JSON.stringify(value))
                }
            }
        };

        // Setup test area
        document.getElementById('test-area').id = 'sidekick-content';

        // Test functions
        function testCreate() {
            if (window.SidekickModules?.LinkGroup) {
                window.SidekickModules.LinkGroup.createLinkGroup('My Links');
                console.log('Created link group');
            }
        }

        function testAddLink() {
            if (window.SidekickModules?.LinkGroup?.linkGroups?.[0]) {
                const group = window.SidekickModules.LinkGroup.linkGroups[0];
                group.links.push({
                    id: Date.now().toString(),
                    name: 'Google',
                    url: 'https://google.com'
                });
                window.SidekickModules.LinkGroup.renderLinkGroup(group);
                console.log('Added link');
            }
        }

        function testClear() {
            document.getElementById('sidekick-content').innerHTML = '';
            if (window.SidekickModules?.LinkGroup) {
                window.SidekickModules.LinkGroup.linkGroups = [];
                console.log('Cleared');
            }
        }
    </script>

    <script src="src/modules/linkgroup.module.js"></script>

    <script>
        setTimeout(async () => {
            if (window.SidekickModules?.LinkGroup) {
                await window.SidekickModules.LinkGroup.init();
                console.log('âœ… Link Group module ready');
            }
        }, 100);
    </script>
</body>
</html>